<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta name="renderer" content="webkit|ie-comp|ie-stand">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
<!--[if lt IE 9]>
<script type="text/javascript" src="../../lib/html5.js"></script>
<script type="text/javascript" src="../../lib/respond.min.js"></script>
<script type="text/javascript" src="../../lib/PIE_IE678.js"></script>
<![endif]-->
<link href="../../lib/zTree/v3/css/zTreeStyle/zTreeStyle.css" rel="stylesheet" type="text/css" />
<link href="../../css/H-ui.min.css" rel="stylesheet" type="text/css" />
<link href="../../css/H-ui.admin.css" rel="stylesheet" type="text/css" />
<link href="../../css/style.css" rel="stylesheet" type="text/css" />
<link href="../../lib/Hui-iconfont/1.0.7/iconfont.css" rel="stylesheet" type="text/css" />
<!--[if IE 6]>
<script type="text/javascript" src="http://lib.h-ui.net/DD_belatedPNG_0.0.8a-min.js" ></script>
<script>DD_belatedPNG.fix('*');</script>
<![endif]-->
<title></title>
</head>
<body ng-app="myApp" ng-controller="myCtrl" ng-init="initData()">
<div class="pd-20" style="width:50%;float:left;padding-left: 100px">
	<div class="cl">
		<span class="l">
			请勾选修改权限设置，修改完成请点击“保存”按钮。
			<a class="btn btn-primary radius" ng-click="save()">
				<i class="Hui-iconfont">&#xe632;</i> 保存
			</a>&nbsp;
			<a class="btn btn-primary radius" href="javascript:location.replace(location.href);">
				重置
			</a>&nbsp;
		</span>
		<br><br>
		<div>
			<ul id="moduleTree" class="ztree"></ul>
		</div>
	</div>
</div>
<div id="moduleDetail" class="pd-20" style="width:25%;float:left;margin-top:50px">
</div>

<script type="text/javascript" src="../../lib/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="../../lib/layer/2.1/layer.js"></script>
<script type="text/javascript" src="../../lib/zTree/v3/js/jquery.ztree.all.min.js"></script>
<script type="text/javascript" src="../../lib/angular.min.js"></script>
<script type="text/javascript" src="../../js/H-ui.js"></script>
<script type="text/javascript" src="../../js/H-ui.admin.js"></script>
<script type="text/javascript" src="../../js/app.js"></script>
<script type="text/javascript" src="../../js/angular_base.js"></script>
<script type="text/javascript" src="../../js/perm/perm.js"></script>
<script type="text/javascript">
	function onClick(e, treeId, treeNode) {
		refreshDetail(treeNode);
	}

	function refreshDetail(treeNode) {
		if(treeNode.id!="-1") {
			var htmlStr ="";
			if(treeNode.bExt=="分类目录"&&treeNode.moduleUrl.length==0) {
				htmlStr = '<div>名称：' + treeNode.name + '</div><br>' +
						'<div>代码：'+treeNode.moduleCode+'</div><br>' +
						'<div>说明：'+treeNode.remark+'</div><br>' +
						'<div>类别：'+treeNode.bExt+'</div><br>' +
						'<div>状态：'+treeNode.status+'</div><br>';
			}else {
				htmlStr = '<div>名称：' + treeNode.name + '</div><br>' +
						'<div>代码：'+treeNode.moduleCode+'</div><br>' +
						'<div>通用权限：'+treeNode.userType+'</div><br>' +
						'<div>路径：'+treeNode.moduleUrl+'</div><br>' +
						'<div>关联接口：<br>'+treeNode.relationUrl.replace(/\n/g, "<br>")+'</div><br>' +
						'<div>说明：'+treeNode.remark+'</div><br>' +
						'<div>类别：'+treeNode.bExt+'</div><br>' +
						'<div>状态：'+treeNode.status+'</div><br>';
			}

			$("#moduleDetail").html(htmlStr);
		}
	}
</script>
</body>
</html>